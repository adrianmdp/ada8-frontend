import*as t from"fp-ts/lib/Either";import{pipe as n,not as r,flow as e,absurd as o,identity as u}from"fp-ts/function";import{toNestError as a,validateFieldsNatively as i}from"@hookform/resolvers";import{TaggedUnionType as f,UnionType as s,IntersectionType as c}from"io-ts";import*as p from"fp-ts/ReadonlyArray";import*as m from"fp-ts/Option";import*as l from"fp-ts/Either";import*as y from"fp-ts/Semigroup";import*as d from"fp-ts/ReadonlyRecord";function g(){return(g=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])}return t}).apply(this,arguments)}var v=function(t){return t.reduce(function(t,r,e){return n(r,l.fold(function(t){return(e>0?".":"")+t},function(t){return"["+t+"]"}),function(n){return""+t+n})},"")},h=["path"],O=function(t){var a,i=n(a=t.context,p.filterMapWithIndex(function(t,n){var r=t-1;return void 0===a[r]||a[r].type instanceof f||a[r].type instanceof s||a[r].type instanceof c?m.none:m.some(n)}),p.map(function(t){return t.key}),p.map(function(t){return n(t,function(t){return parseInt(t,10)},l.fromPredicate(r(Number.isNaN),function(){return t}))}),p.toArray,v);return{message:n(t.message,l.fromNullable(t.context),l.mapLeft(e(p.last,m.map(function(t){return"expected "+t.type.name+" but got "+JSON.stringify(t.actual)}),m.getOrElseW(function(){return o("Error context is missing name")}))),l.getOrElseW(u)),type:n(t.context,p.last,m.map(function(t){return t.type.name}),m.getOrElse(function(){return"unknown"})),path:i}},b=function(t){return n(t,p.map(function(t){var n;return(n={})[t.path]={type:t.type,message:t.message},n}),function(t){return y.fold({concat:function(t,n){return Object.assign({},n,t)}})({},t)})},x={concat:function(t,n){var r;return g({},n,{types:g({},t.types,(r={},r[t.type]=t.message,r[n.type]=n.message,r))})}},N=function(t){return n(d.fromFoldableMap(x,p.Foldable)(t,function(t){return[t.path,t]}),d.map(function(t){return function(t,n){if(null==t)return{};var r,e,o={},u=Object.keys(t);for(e=0;e<u.length;e++)n.indexOf(r=u[e])>=0||(o[r]=t[r]);return o}(t,h)}))},E=function(r){return function(e,o,u){return n(e,r.decode,t.mapLeft((f=!u.shouldUseNativeValidation&&"all"===u.criteriaMode,function(t){var r=f?N:b;return n(t,p.map(O),r)})),t.mapLeft(function(t){return a(t,u)}),t.fold(function(t){return{values:{},errors:t}},function(t){return u.shouldUseNativeValidation&&i({},u),{values:t,errors:{}}}));var f}};export{E as ioTsResolver};
//# sourceMappingURL=io-ts.module.js.map
