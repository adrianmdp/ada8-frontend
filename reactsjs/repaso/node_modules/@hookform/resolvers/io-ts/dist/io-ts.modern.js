import*as e from"fp-ts/lib/Either";import{pipe as t,not as r,flow as o,absurd as a,identity as s}from"fp-ts/function";import{toNestError as n,validateFieldsNatively as p}from"@hookform/resolvers";import{TaggedUnionType as i,UnionType as m,IntersectionType as f}from"io-ts";import*as l from"fp-ts/ReadonlyArray";import*as c from"fp-ts/Option";import*as u from"fp-ts/Either";import*as y from"fp-ts/Semigroup";import*as d from"fp-ts/ReadonlyRecord";function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}const h=e=>e.reduce((e,r,o)=>t(r,u.fold(e=>`${o>0?".":""}${e}`,e=>`[${e}]`),t=>`${e}${t}`),""),v=["path"],O=e=>{const n=t(p=e.context,l.filterMapWithIndex((e,t)=>{const r=e-1;return void 0===p[r]||p[r].type instanceof i||p[r].type instanceof m||p[r].type instanceof f?c.none:c.some(t)}),l.map(({key:e})=>e),l.map(e=>t(e,e=>parseInt(e,10),u.fromPredicate(r(Number.isNaN),()=>e))),l.toArray,h);var p;return{message:t(e.message,u.fromNullable(e.context),u.mapLeft(o(l.last,c.map(e=>`expected ${e.type.name} but got ${JSON.stringify(e.actual)}`),c.getOrElseW(()=>a("Error context is missing name")))),u.getOrElseW(s)),type:t(e.context,l.last,c.map(e=>e.type.name),c.getOrElse(()=>"unknown")),path:n}},b=e=>t(e,l.map(e=>({[e.path]:{type:e.type,message:e.message}})),e=>y.fold({concat:(e,t)=>Object.assign({},t,e)})({},e)),x={concat:(e,t)=>g({},t,{types:g({},e.types,{[e.type]:e.message,[t.type]:t.message})})},N=e=>t(d.fromFoldableMap(x,l.Foldable)(e,e=>[e.path,e]),d.map(e=>function(e,t){if(null==e)return{};var r,o,a={},s=Object.keys(e);for(o=0;o<s.length;o++)t.indexOf(r=s[o])>=0||(a[r]=e[r]);return a}(e,v))),$=r=>(o,a,s)=>{return t(o,r.decode,e.mapLeft((i=!s.shouldUseNativeValidation&&"all"===s.criteriaMode,e=>{const r=i?N:b;return t(e,l.map(O),r)})),e.mapLeft(e=>n(e,s)),e.fold(e=>({values:{},errors:e}),e=>(s.shouldUseNativeValidation&&p({},s),{values:e,errors:{}})));var i};export{$ as ioTsResolver};
//# sourceMappingURL=io-ts.modern.js.map
