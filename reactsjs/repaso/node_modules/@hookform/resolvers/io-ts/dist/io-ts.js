var e=require("fp-ts/lib/Either"),t=require("fp-ts/function"),r=require("@hookform/resolvers"),n=require("io-ts"),i=require("fp-ts/ReadonlyArray"),o=require("fp-ts/Option"),u=require("fp-ts/Either"),a=require("fp-ts/Semigroup"),f=require("fp-ts/ReadonlyRecord");function p(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,t}var c=/*#__PURE__*/p(e),s=/*#__PURE__*/p(i),l=/*#__PURE__*/p(o),d=/*#__PURE__*/p(u),y=/*#__PURE__*/p(a),m=/*#__PURE__*/p(f);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var g=function(e){return e.reduce(function(e,r,n){return t.pipe(r,d.fold(function(e){return(n>0?".":"")+e},function(e){return"["+e+"]"}),function(t){return""+e+t})},"")},b=["path"],O=function(e){var r,i=t.pipe(r=e.context,s.filterMapWithIndex(function(e,t){var i=e-1;return void 0===r[i]||r[i].type instanceof n.TaggedUnionType||r[i].type instanceof n.UnionType||r[i].type instanceof n.IntersectionType?l.none:l.some(t)}),s.map(function(e){return e.key}),s.map(function(e){return t.pipe(e,function(e){return parseInt(e,10)},d.fromPredicate(t.not(Number.isNaN),function(){return e}))}),s.toArray,g);return{message:t.pipe(e.message,d.fromNullable(e.context),d.mapLeft(t.flow(s.last,l.map(function(e){return"expected "+e.type.name+" but got "+JSON.stringify(e.actual)}),l.getOrElseW(function(){return t.absurd("Error context is missing name")}))),d.getOrElseW(t.identity)),type:t.pipe(e.context,s.last,l.map(function(e){return e.type.name}),l.getOrElse(function(){return"unknown"})),path:i}},h=function(e){return t.pipe(e,s.map(function(e){var t;return(t={})[e.path]={type:e.type,message:e.message},t}),function(e){return y.fold({concat:function(e,t){return Object.assign({},t,e)}})({},e)})},q={concat:function(e,t){var r;return v({},t,{types:v({},e.types,(r={},r[e.type]=e.message,r[t.type]=t.message,r))})}},N=function(e){return t.pipe(m.fromFoldableMap(q,s.Foldable)(e,function(e){return[e.path,e]}),m.map(function(e){return function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)t.indexOf(r=o[n])>=0||(i[r]=e[r]);return i}(e,b)}))};exports.ioTsResolver=function(e){return function(n,i,o){return t.pipe(n,e.decode,c.mapLeft((u=!o.shouldUseNativeValidation&&"all"===o.criteriaMode,function(e){var r=u?N:h;return t.pipe(e,s.map(O),r)})),c.mapLeft(function(e){return r.toNestError(e,o)}),c.fold(function(e){return{values:{},errors:e}},function(e){return o.shouldUseNativeValidation&&r.validateFieldsNatively({},o),{values:e,errors:{}}}));var u}};
//# sourceMappingURL=io-ts.js.map
